<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="zh">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Ancient Blog Theme</title>
    <meta name="keywords" content="ancient blog theme, free css templates, blog template, CSS, HTML"/>
    <meta name="description" content="Ancient Blog Theme - free blog template from www.cssmoban.com"/>
    <link href="/css/templatemo_style.css" rel="stylesheet" type="text/css"/>
    <script src="/js/jquery.min.js"></script>
    <script src="/admin/lib/prettify.min.js"></script>
    <script src="/admin/lib/marked.min.js"></script>
    <script src="/admin/lib/raphael.min.js"></script>
    <script src="/admin/lib/underscore.min.js"></script>
    <script src="/admin/lib/sequence-diagram.min.js"></script>
    <script src="/admin/lib/flowchart.min.js"></script>
    <script src="/admin/lib/jquery.flowchart.min.js"></script>
    <script src="/admin/js/editormd.js"></script>
    <script src="/js/article_content.js"></script>
    <script language="javascript" type="text/javascript">
        function clearText(field) {
            if (field.defaultValue == field.value) field.value = '';
            else if (field.value == '') field.value = field.defaultValue;
        }

        $(function () {
            $("#comment_form").submit(function () {
                    var commentBody = $(".comment_textarea").val();
                    console.log(commentBody);
                    if (commentBody === null || commentBody === "") {
                        alert("评论内容不能为空！");
                        return false;
                    }
                    var formData = $(this).serialize();
                    console.log(formData);
                    $.ajax({
                        url: "/article/comment",
                        data: formData,
                        type: "post",
                        dataType: "json",
                        success: function (result) {
                            console.log(result);
                            if(result.code==="success"){
                                location.reload();
                            }
                        }
                    });
                    return false;
                }
            );
        });
    </script>

</head>
<body>

<div id="templatemo_wrapper">

    <span class="bg_top"></span>
    <span class="bg_bottom"></span>

    <div th:replace="/part/menu::menu"></div>
    <div th:replace="/part/header::header"></div>

    <div id="templatemo_main">
        <div th:replace="/part/sidebar::sidebar"></div>

        <div id="content">

            <div class="cbox_fw">
                <h3 th:text="${article.title}">A股估值正处于价值中枢</h3>
                <p align="justify">
                    分类: <a href="#" th:text="${article.category.name}">程序员</a> |
                    <strong>阅读量：</strong><span th:text="${article.views}">600</span> |
                    <strong><a href="#">Gsein</a>发表于</strong><span
                        th:text="${#calendars.format(article.publishTime,'yyyy年MM月dd日')}">2017年9月7日</span>
                </p>
                <!--<p align="justify">
                    &lt;!&ndash;<a href="#"><img th:src="${article.pictureUrl}" src="/images/templatemo_image_07.jpg" alt="image" class="image_frame image_fl"/></a>&ndash;&gt;
                    <span th:text="${article.digest}">根据市值和GDP的比值来计算，3400点的点位大约正好是A股的价值中枢。这一判断是基于巴菲特提出的黄金分割法计算的。这个部分写文章摘要有些过于简短
                应该还是书写文章的内容比较合理，但是这样的话需要使用markdown转html的插件</span></p>-->
                <p id="article_content" align="justify">
                    <textarea id="append-test" style="display:none;" th:utext="${article.content}"></textarea>
                </p>

            </div>
            <!-- 评论区 -->
            <div class="comment_title">
                <span>发表评论</span>
            </div>
            <div>
                <form id="comment_form">
                    <input type="hidden" name="id" th:value="${article.id}"/>
                    <p>用户名：<input type="text" readonly th:value="${username}" value="吉林省匿名网友" name="username"></p>
                    <p>评论内容：</p>
                    <textarea class="comment_textarea" placeholder="来说点什么吧..." name="commentBody"></textarea>
                    <p><input type="submit" class="mybtn" id="publish" value="发布"/></p>
                </form>
            </div>
            <div class="comment_title">
                <span>最新评论</span>
            </div>
            <div>
                <div th:each="comment:${commentList}" class="comment">
                    <div class="comment_info">
                        <span th:text="${comment.floor}">28</span>楼
                        <span th:text="${comment.ip}"></span>
                        <a th:text="${comment.username}">lhing17</a>
                        <span th:text="${#calendars.format(comment.publishTime,'yyyy-MM-dd HH:mm')}">2016-06-14 14:40</span>发表
                        <a>回复</a>
                    </div>
                    <img class="comment_avatar" th:src="${comment.avatarUrl}" src="/images/avatar/avatar_lhing17.jpg">
                    <p class="comment_content" th:text="${comment.content}">真的不错，简单易懂！</p>
                </div>
            </div>

            <div class="cleaner h30"></div>

        </div>

        <div class="cleaner"></div>
    </div> <!-- end of main -->
    <div id="templatemo_main_bottom"></div>

    <div th:replace="/part/footer::footer"></div>

</div> <!-- end of wrapper -->

</body>
</html>